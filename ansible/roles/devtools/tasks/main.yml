---
- name: Add Vim PPA
  become: yes
  become_method: sudo
  apt_repository:
    repo: ppa:jonathonf/vim
  when: (ansible_distribution == "Ubuntu" and ansible_distribution_major_version < "18")

- name: Update apt cache
  become: yes
  become_method: sudo
  apt: update_cache=yes

- name: Install development tools
  apt: name={{ item }} state=latest
  become: yes
  become_method: sudo
  with_items:
    - curl
    - git
    - htop
    - keychain
    - mercurial
    - net-tools
    - nmap
    - python-pip
    - silversearcher-ag
    - tmux
    - vim
    - virtualenvwrapper
    - wget
    - zsh
    #- pipenv?

- name: Change shell to ZSH
  become: yes
  user: shell=/bin/zsh name={{ ansible_user_id }}

- name: Clone oh-my-zsh repo
  git: repo=https://github.com/robbyrussell/oh-my-zsh.git dest=~/.oh-my-zsh

- name: Install Ripgrep from Github release
  become: yes
  become_method: sudo
  apt:
    deb: https://github.com/BurntSushi/ripgrep/releases/download/0.8.1/ripgrep_0.8.1_amd64.deb

# If proper packaging is ever available, use that instead of blindly running scripts from the internets https://github.com/junegunn/fzf/issues/1094
- name: Clone FZF from Github
  git:
    repo: 'https://github.com/junegunn/fzf.git'
    dest:  ~/.fzf
    depth: 1

- name: Install FZF
  command: ~/.fzf/install --all
  

    